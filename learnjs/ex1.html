<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Test 3</title>
</head>
<body>
    <script>
        var collection = {
            '2548': {
                'album': 'Slippery When Wet',
                'artist': 'Bon Jovi',
                'tracks': [
                    'Let It Rock',
                    'You Give Love A Bad Name'
                ]
            },
            '2468': {
                'album': '1999',
                'artist': 'Prince',
                'tracks': [
                    '1999',
                    'Little Red Corvette'
                ]
            },
            '1245': {
                'aritist': 'Robert Palmer',
                'tracks': [],
                'album': [
                    'a'
                ]
            },
            '5439': {
                'album':  'ABBA Gold'
            }
        }

        var collectionCopy = JSON.parse(JSON.stringify(collection));
        // JSON.parse --- chuyển chuỗi JSON thành object
        // JSON.stringify --- chuyển object thành chuỗi JSON

        function updateRecords(id, prop, value){
            if (value === '') {
                delete collection[id][prop];
            } // xóa những key không có giá trị
            else if (prop === 'album') {
                collection[id][prop] = collection[id][prop] || [];
                collection[id][prop].push(value);
            }  // đưa item vào trong array
            else {
                collection[id][prop] = value;
            }
            return collection;
        }

        console.log(updateRecords(1245, 'album', 'abcxyz'));
    </script>
</body>
</html>